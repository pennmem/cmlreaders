

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Started with CML Readers &mdash; CML Data Readers 0.8.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Shortcuts for common queries" href="shortcuts.html" />
    <link rel="prev" title="Data Guide" href="data_guide.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> CML Data Readers
          

          
          </a>

          
            
            
              <div class="version">
                0.8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_guide.html">Data Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started with CML Readers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Finding-Files-on-Rhino">Finding Files on Rhino</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#What-can-you-request?">What can you request?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Finding-File-Paths">Finding File Paths</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Identifying-Available-Sessions">Identifying Available Sessions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Loading-Data">Loading Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Using-the-Default-Representation">Using the Default Representation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Using-the-Underlying-Reader">Using the Underlying Reader</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Loading-from-a-Custom-Location">Loading from a Custom Location</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Saving-Data">Saving Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Loading-Multiple-Sessions">Loading Multiple Sessions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Loading-EEG">Loading EEG</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Reading-a-full-session">Reading a full session</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Reading-from-events">Reading from events</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Reading-from-multiple-sessions">Reading from multiple sessions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Converting-EEG-Representation">Converting EEG Representation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="shortcuts.html">Shortcuts for common queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev.html">Developer’s Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CML Data Readers</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Getting Started with CML Readers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/getting_started.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 8ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="Getting-Started-with-CML-Readers">
<h1>Getting Started with CML Readers<a class="headerlink" href="#Getting-Started-with-CML-Readers" title="Permalink to this headline">¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">cmlreaders</span> <span class="k">as</span> <span class="nn">cml</span>
</pre></div>
</div>
</div>
<div class="section" id="Finding-Files-on-Rhino">
<h2>Finding Files on Rhino<a class="headerlink" href="#Finding-Files-on-Rhino" title="Permalink to this headline">¶</a></h2>
<p>The PathFinder helper class can be used to locate files on RHINO. It’s
sole responsibility is to locate and return the file path of the file.
In many cases, a file could be located in more than one location. In
these situations, PathFinder will search over the list of possible
locations and return the path where the file is first found. Implicitly,
this assumes that the order of the file locations is prioritized such
that the preferred location comes before a fall-back location.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># If not working on RHINO, specify the mount point.</span>
<span class="c1"># Alternatively, set the CML_ROOT environment variable and never</span>
<span class="c1"># have to explicitly pass the rootdir keyword argument.</span>
<span class="n">rhino_root</span> <span class="o">=</span> <span class="s2">&quot;/mnt/rhino/&quot;</span>

<span class="c1"># Instantiate the finder object</span>
<span class="n">finder</span> <span class="o">=</span> <span class="n">cml</span><span class="o">.</span><span class="n">PathFinder</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="s2">&quot;R1389J&quot;</span><span class="p">,</span> <span class="n">experiment</span><span class="o">=</span><span class="s2">&quot;catFR5&quot;</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                        <span class="n">localization</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">montage</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">rootdir</span><span class="o">=</span><span class="n">rhino_root</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="What-can-you-request?">
<h3>What can you request?<a class="headerlink" href="#What-can-you-request?" title="Permalink to this headline">¶</a></h3>
<p>The PathFinder has a few built-in properties to help you understand what
data types are currently supported. Different file types require that
the finder be instantiated with different fields. For example, if you
are planning to request localization files, there is no need to specify
an experiment, session, or montage. However, it is not a problem to
specify too many fields, as any extraneous ones will simply be ignored
if the data type does not require that it be given. The following
properties are defined:</p>
<ul class="simple">
<li>requestable_files: All supported data types</li>
<li>localization_files: Files related to localization</li>
<li>montage_files: Files associated with a specific montage</li>
<li>session_files: Files that are specific to a session. This files
could be processed events, Ramulator files, etc.</li>
</ul>
<p>For high-level information about each of these data types, see the <a class="reference external" href="https://pennmem.github.io/cmlreaders/html/data_guide.html">Data
Guide</a>
section of the documentation.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">finder</span><span class="o">.</span><span class="n">requestable_files</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[3]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>[&#39;r1_index&#39;,
 &#39;ltp_index&#39;,
 &#39;pyfr_index&#39;,
 &#39;pyfr_root&#39;,
 &#39;localization&#39;,
 &#39;voxel_coordinates&#39;,
 &#39;prior_stim_results&#39;,
 &#39;electrode_coordinates&#39;,
 &#39;jacksheet&#39;,
 &#39;area&#39;,
 &#39;electrode_categories&#39;,
 &#39;good_leads&#39;,
 &#39;leads&#39;,
 &#39;classifier_excluded_leads&#39;,
 &#39;matlab_bipolar_talstruct&#39;,
 &#39;matlab_monopolar_talstruct&#39;,
 &#39;pairs&#39;,
 &#39;contacts&#39;,
 &#39;session_summary&#39;,
 &#39;classifier_summary&#39;,
 &#39;math_summary&#39;,
 &#39;target_selection_table&#39;,
 &#39;baseline_classifier&#39;,
 &#39;all_events&#39;,
 &#39;task_events&#39;,
 &#39;math_events&#39;,
 &#39;ps4_events&#39;,
 &#39;sources&#39;,
 &#39;processed_eeg&#39;,
 &#39;experiment_log&#39;,
 &#39;session_log&#39;,
 &#39;ramulator_session_folder&#39;,
 &#39;event_log&#39;,
 &#39;experiment_config&#39;,
 &#39;raw_eeg&#39;,
 &#39;odin_config&#39;,
 &#39;used_classifier&#39;,
 &#39;excluded_pairs&#39;,
 &#39;all_pairs&#39;]
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">finder</span><span class="o">.</span><span class="n">localization_files</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[4]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>[&#39;localization&#39;]
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">finder</span><span class="o">.</span><span class="n">montage_files</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[5]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>[&#39;pairs&#39;,
 &#39;contacts&#39;,
 &#39;voxel_coordinates&#39;,
 &#39;prior_stim_results&#39;,
 &#39;electrode_coordinates&#39;,
 &#39;jacksheet&#39;,
 &#39;good_leads&#39;,
 &#39;leads&#39;,
 &#39;area&#39;,
 &#39;classifier_excluded_leads&#39;,
 &#39;electrode_categories&#39;,
 &#39;target_selection_file&#39;,
 &#39;baseline_classifier&#39;]
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">finder</span><span class="o">.</span><span class="n">session_files</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[6]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>[&#39;session_summary&#39;,
 &#39;classifier_summary&#39;,
 &#39;math_summary&#39;,
 &#39;used_classifier&#39;,
 &#39;excluded_pairs&#39;,
 &#39;all_pairs&#39;,
 &#39;experiment_log&#39;,
 &#39;session_log&#39;,
 &#39;event_log&#39;,
 &#39;experiment_config&#39;,
 &#39;raw_eeg&#39;,
 &#39;odin_config&#39;,
 &#39;all_events&#39;,
 &#39;task_events&#39;,
 &#39;math_events&#39;,
 &#39;ps4_events&#39;]
</pre></div>
</div>
</div>
</div>
<div class="section" id="Finding-File-Paths">
<h3>Finding File Paths<a class="headerlink" href="#Finding-File-Paths" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Find some example files</span>
<span class="n">example_data_types</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pairs&#39;</span><span class="p">,</span> <span class="s1">&#39;task_events&#39;</span><span class="p">,</span> <span class="s1">&#39;voxel_coordinates&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">data_type</span> <span class="ow">in</span> <span class="n">example_data_types</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">finder</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">data_type</span><span class="o">=</span><span class="n">data_type</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
/mnt/rhino/protocols/r1/subjects/R1389J/localizations/0/montages/0/neuroradiology/current_processed/pairs.json
/mnt/rhino/protocols/r1/subjects/R1389J/experiments/catFR5/sessions/1/behavioral/current_processed/task_events.json
/mnt/rhino/data10/RAM/subjects/R1389J/tal/VOX_coords_mother.txt
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="Identifying-Available-Sessions">
<h2>Identifying Available Sessions<a class="headerlink" href="#Identifying-Available-Sessions" title="Permalink to this headline">¶</a></h2>
<p>CMLReaders contains a utility function for loading the json-formatted
index files located in the protocols/ directory on RHINO as a dataframe.
Once loaded, the standard pandas selection idioms can be used to answer
questions such as:</p>
<ol class="arabic simple">
<li>What subjects completed FR1?</li>
<li>What experiments did subject R1111M complete?</li>
<li>How many sessions have been colleted of PAL1?</li>
</ol>
<p>For many analyses, this will be the first step in determining the sample
of subjects to be used.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">cmlreaders</span> <span class="k">import</span> <span class="n">get_data_index</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">r1_data</span> <span class="o">=</span> <span class="n">get_data_index</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;r1&#39;</span><span class="p">,</span> <span class="n">rootdir</span><span class="o">=</span><span class="n">rhino_root</span><span class="p">)</span>
<span class="n">r1_data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Recognition</th>
      <th>all_events</th>
      <th>contacts</th>
      <th>experiment</th>
      <th>import_type</th>
      <th>localization</th>
      <th>math_events</th>
      <th>montage</th>
      <th>original_experiment</th>
      <th>original_session</th>
      <th>pairs</th>
      <th>ps4_events</th>
      <th>session</th>
      <th>subject</th>
      <th>subject_alias</th>
      <th>system_version</th>
      <th>task_events</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>NaN</td>
      <td>protocols/r1/subjects/R1001P/experiments/FR1/s...</td>
      <td>protocols/r1/subjects/R1001P/localizations/0/m...</td>
      <td>FR1</td>
      <td>build</td>
      <td>0</td>
      <td>protocols/r1/subjects/R1001P/experiments/FR1/s...</td>
      <td>0</td>
      <td>NaN</td>
      <td>0</td>
      <td>protocols/r1/subjects/R1001P/localizations/0/m...</td>
      <td>NaN</td>
      <td>0</td>
      <td>R1001P</td>
      <td>R1001P</td>
      <td>NaN</td>
      <td>protocols/r1/subjects/R1001P/experiments/FR1/s...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>NaN</td>
      <td>protocols/r1/subjects/R1001P/experiments/FR1/s...</td>
      <td>protocols/r1/subjects/R1001P/localizations/0/m...</td>
      <td>FR1</td>
      <td>build</td>
      <td>0</td>
      <td>protocols/r1/subjects/R1001P/experiments/FR1/s...</td>
      <td>0</td>
      <td>NaN</td>
      <td>1</td>
      <td>protocols/r1/subjects/R1001P/localizations/0/m...</td>
      <td>NaN</td>
      <td>1</td>
      <td>R1001P</td>
      <td>R1001P</td>
      <td>NaN</td>
      <td>protocols/r1/subjects/R1001P/experiments/FR1/s...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NaN</td>
      <td>protocols/r1/subjects/R1001P/experiments/FR2/s...</td>
      <td>protocols/r1/subjects/R1001P/localizations/0/m...</td>
      <td>FR2</td>
      <td>build</td>
      <td>0</td>
      <td>protocols/r1/subjects/R1001P/experiments/FR2/s...</td>
      <td>0</td>
      <td>NaN</td>
      <td>0</td>
      <td>protocols/r1/subjects/R1001P/localizations/0/m...</td>
      <td>NaN</td>
      <td>0</td>
      <td>R1001P</td>
      <td>R1001P</td>
      <td>NaN</td>
      <td>protocols/r1/subjects/R1001P/experiments/FR2/s...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>NaN</td>
      <td>protocols/r1/subjects/R1001P/experiments/FR2/s...</td>
      <td>protocols/r1/subjects/R1001P/localizations/0/m...</td>
      <td>FR2</td>
      <td>build</td>
      <td>0</td>
      <td>protocols/r1/subjects/R1001P/experiments/FR2/s...</td>
      <td>0</td>
      <td>NaN</td>
      <td>1</td>
      <td>protocols/r1/subjects/R1001P/localizations/0/m...</td>
      <td>NaN</td>
      <td>1</td>
      <td>R1001P</td>
      <td>R1001P</td>
      <td>NaN</td>
      <td>protocols/r1/subjects/R1001P/experiments/FR2/s...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NaN</td>
      <td>protocols/r1/subjects/R1001P/experiments/PAL1/...</td>
      <td>protocols/r1/subjects/R1001P/localizations/0/m...</td>
      <td>PAL1</td>
      <td>build</td>
      <td>0</td>
      <td>protocols/r1/subjects/R1001P/experiments/PAL1/...</td>
      <td>0</td>
      <td>NaN</td>
      <td>0</td>
      <td>protocols/r1/subjects/R1001P/localizations/0/m...</td>
      <td>NaN</td>
      <td>0</td>
      <td>R1001P</td>
      <td>R1001P</td>
      <td>NaN</td>
      <td>protocols/r1/subjects/R1001P/experiments/PAL1/...</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># What subjects completed FR1?</span>
<span class="n">fr1_subjects</span> <span class="o">=</span> <span class="n">r1_data</span><span class="p">[</span><span class="n">r1_data</span><span class="p">[</span><span class="s1">&#39;experiment&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;FR1&#39;</span><span class="p">][</span><span class="s1">&#39;subject&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="n">fr1_subjects</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[10]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>array([&#39;R1001P&#39;, &#39;R1002P&#39;, &#39;R1003P&#39;, &#39;R1006P&#39;, &#39;R1010J&#39;, &#39;R1015J&#39;,
       &#39;R1018P&#39;, &#39;R1020J&#39;, &#39;R1022J&#39;, &#39;R1023J&#39;, &#39;R1026D&#39;, &#39;R1027J&#39;,
       &#39;R1030J&#39;, &#39;R1031M&#39;, &#39;R1032D&#39;, &#39;R1033D&#39;, &#39;R1034D&#39;, &#39;R1035M&#39;,
       &#39;R1036M&#39;, &#39;R1039M&#39;, &#39;R1042M&#39;, &#39;R1044J&#39;, &#39;R1045E&#39;, &#39;R1048E&#39;,
       &#39;R1049J&#39;, &#39;R1050M&#39;, &#39;R1051J&#39;, &#39;R1052E&#39;, &#39;R1053M&#39;, &#39;R1054J&#39;,
       &#39;R1056M&#39;, &#39;R1057E&#39;, &#39;R1059J&#39;, &#39;R1060M&#39;, &#39;R1061T&#39;, &#39;R1062J&#39;,
       &#39;R1063C&#39;, &#39;R1065J&#39;, &#39;R1066P&#39;, &#39;R1067P&#39;, &#39;R1068J&#39;, &#39;R1069M&#39;,
       &#39;R1070T&#39;, &#39;R1074M&#39;, &#39;R1075J&#39;, &#39;R1076D&#39;, &#39;R1077T&#39;, &#39;R1080E&#39;,
       &#39;R1081J&#39;, &#39;R1083J&#39;, &#39;R1084T&#39;, &#39;R1086M&#39;, &#39;R1089P&#39;, &#39;R1092J&#39;,
       &#39;R1093J&#39;, &#39;R1094T&#39;, &#39;R1096E&#39;, &#39;R1098D&#39;, &#39;R1100D&#39;, &#39;R1101T&#39;,
       &#39;R1102P&#39;, &#39;R1104D&#39;, &#39;R1105E&#39;, &#39;R1106M&#39;, &#39;R1108J&#39;, &#39;R1111M&#39;,
       &#39;R1112M&#39;, &#39;R1113T&#39;, &#39;R1114C&#39;, &#39;R1115T&#39;, &#39;R1118N&#39;, &#39;R1120E&#39;,
       &#39;R1121M&#39;, &#39;R1122E&#39;, &#39;R1123C&#39;, &#39;R1124J&#39;, &#39;R1125T&#39;, &#39;R1127P&#39;,
       &#39;R1128E&#39;, &#39;R1129D&#39;, &#39;R1130M&#39;, &#39;R1131M&#39;, &#39;R1134T&#39;, &#39;R1135E&#39;,
       &#39;R1136N&#39;, &#39;R1137E&#39;, &#39;R1138T&#39;, &#39;R1142N&#39;, &#39;R1145J&#39;, &#39;R1146E&#39;,
       &#39;R1147P&#39;, &#39;R1148P&#39;, &#39;R1149N&#39;, &#39;R1150J&#39;, &#39;R1151E&#39;, &#39;R1153T&#39;,
       &#39;R1154D&#39;, &#39;R1155D&#39;, &#39;R1156D&#39;, &#39;R1158T&#39;, &#39;R1159P&#39;, &#39;R1161E&#39;,
       &#39;R1162N&#39;, &#39;R1163T&#39;, &#39;R1164E&#39;, &#39;R1166D&#39;, &#39;R1167M&#39;, &#39;R1168T&#39;,
       &#39;R1169P&#39;, &#39;R1170J&#39;, &#39;R1171M&#39;, &#39;R1172E&#39;, &#39;R1173J&#39;, &#39;R1174T&#39;,
       &#39;R1175N&#39;, &#39;R1176M&#39;, &#39;R1177M&#39;, &#39;R1178P&#39;, &#39;R1184M&#39;, &#39;R1185N&#39;,
       &#39;R1186P&#39;, &#39;R1187P&#39;, &#39;R1189M&#39;, &#39;R1191J&#39;, &#39;R1193T&#39;, &#39;R1195E&#39;,
       &#39;R1196N&#39;, &#39;R1198M&#39;, &#39;R1200T&#39;, &#39;R1201P&#39;, &#39;R1202M&#39;, &#39;R1203T&#39;,
       &#39;R1204T&#39;, &#39;R1207J&#39;, &#39;R1212P&#39;, &#39;R1214M&#39;, &#39;R1215M&#39;, &#39;R1216E&#39;,
       &#39;R1217T&#39;, &#39;R1221P&#39;, &#39;R1222M&#39;, &#39;R1223E&#39;, &#39;R1226D&#39;, &#39;R1228M&#39;,
       &#39;R1229M&#39;, &#39;R1230J&#39;, &#39;R1231M&#39;, &#39;R1232N&#39;, &#39;R1234D&#39;, &#39;R1236J&#39;,
       &#39;R1240T&#39;, &#39;R1241J&#39;, &#39;R1243T&#39;, &#39;R1247P&#39;, &#39;R1250N&#39;, &#39;R1251M&#39;,
       &#39;R1260D&#39;, &#39;R1264P&#39;, &#39;R1268T&#39;, &#39;R1274T&#39;, &#39;R1275D&#39;, &#39;R1277J&#39;,
       &#39;R1281E&#39;, &#39;R1283T&#39;, &#39;R1286J&#39;, &#39;R1288P&#39;, &#39;R1290M&#39;, &#39;R1291M&#39;,
       &#39;R1292E&#39;, &#39;R1293P&#39;, &#39;R1297T&#39;, &#39;R1298E&#39;, &#39;R1299T&#39;, &#39;R1302M&#39;,
       &#39;R1304N&#39;, &#39;R1306E&#39;, &#39;R1307N&#39;, &#39;R1308T&#39;, &#39;R1309M&#39;, &#39;R1310J&#39;,
       &#39;R1311T&#39;, &#39;R1313J&#39;, &#39;R1315T&#39;, &#39;R1316T&#39;, &#39;R1317D&#39;, &#39;R1318N&#39;,
       &#39;R1320D&#39;, &#39;R1321M&#39;, &#39;R1323T&#39;, &#39;R1324M&#39;, &#39;R1325C&#39;, &#39;R1328E&#39;,
       &#39;R1329T&#39;, &#39;R1330D&#39;, &#39;R1331T&#39;, &#39;R1332M&#39;, &#39;R1334T&#39;, &#39;R1336T&#39;,
       &#39;R1337E&#39;, &#39;R1338T&#39;, &#39;R1339D&#39;, &#39;R1341T&#39;, &#39;R1342M&#39;, &#39;R1345D&#39;,
       &#39;R1346T&#39;, &#39;R1347D&#39;, &#39;R1349T&#39;, &#39;R1350D&#39;, &#39;R1351M&#39;, &#39;R1354E&#39;,
       &#39;R1355T&#39;, &#39;R1358T&#39;, &#39;R1361C&#39;, &#39;R1363T&#39;, &#39;R1364C&#39;, &#39;R1367D&#39;,
       &#39;R1368T&#39;, &#39;R1373T&#39;, &#39;R1374T&#39;, &#39;R1375C&#39;, &#39;R1376D&#39;, &#39;R1377M&#39;,
       &#39;R1378T&#39;, &#39;R1379E&#39;, &#39;R1380D&#39;, &#39;R1381T&#39;, &#39;R1383J&#39;, &#39;R1384J&#39;,
       &#39;R1385E&#39;, &#39;R1386T&#39;, &#39;R1387E&#39;, &#39;R1390M&#39;, &#39;R1391T&#39;, &#39;R1393T&#39;,
       &#39;R1394E&#39;, &#39;R1395M&#39;, &#39;R1396T&#39;, &#39;R1397D&#39;, &#39;R1398J&#39;, &#39;R1401J&#39;,
       &#39;R1402E&#39;, &#39;R1404E&#39;, &#39;R1405E&#39;, &#39;R1406M&#39;, &#39;R1409D&#39;, &#39;R1412M&#39;,
       &#39;R1414E&#39;, &#39;R1415T&#39;, &#39;R1416T&#39;, &#39;R1420T&#39;, &#39;R1421M&#39;, &#39;R1422T&#39;,
       &#39;R1423E&#39;, &#39;R1425D&#39;, &#39;R1427T&#39;, &#39;R1431J&#39;], dtype=object)
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># What experiments did R1111M complete?</span>
<span class="n">r1111m_experiments</span> <span class="o">=</span> <span class="n">r1_data</span><span class="p">[</span><span class="n">r1_data</span><span class="p">[</span><span class="s1">&#39;subject&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;R1111M&#39;</span><span class="p">][</span><span class="s1">&#39;experiment&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="n">r1111m_experiments</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[11]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>array([&#39;FR1&#39;, &#39;FR2&#39;, &#39;PAL1&#39;, &#39;PAL2&#39;, &#39;PS2&#39;, &#39;catFR1&#39;], dtype=object)
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># How many sessions of PAL1 have been collected?</span>
<span class="n">pal_sessions</span> <span class="o">=</span> <span class="n">r1_data</span><span class="p">[</span><span class="n">r1_data</span><span class="p">[</span><span class="s1">&#39;experiment&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;PAL1&#39;</span><span class="p">]</span>
<span class="nb">len</span><span class="p">(</span><span class="n">pal_sessions</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[12]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>151
</pre></div>
</div>
</div>
</div>
<div class="section" id="Loading-Data">
<h2>Loading Data<a class="headerlink" href="#Loading-Data" title="Permalink to this headline">¶</a></h2>
<p>In most cases, the end goal is to load the data into memory rather than
just locating a file or determing what data has been collected. In this
case, CML Readers provides a handy class to unify the API for loading
data. By default, the location will be determined automatically based on
the file type using the PathFinder class demonstrated earlier. However,
a custom path can be given by using the file_path keyword. This can be
useful if you have some data stored locally that is in the same format
as one of the data types supported by CMLReaders that you would like to
load and use. See the “Loading from a Custom Location” section below for
an example.</p>
<p>Each data type has a default representation that is returned when you
call the .load() method. Most users will want to use this default
representation. However, if you would like to get the data in a
different format, you have two options:</p>
<ol class="arabic simple">
<li>Get the reader for the data type and load the data using a different
supported method using one of the as_x methods</li>
<li>Load the data as the default type and convert it manually</li>
</ol>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">reader</span> <span class="o">=</span> <span class="n">cml</span><span class="o">.</span><span class="n">CMLReader</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="s2">&quot;R1389J&quot;</span><span class="p">,</span> <span class="n">experiment</span><span class="o">=</span><span class="s2">&quot;catFR5&quot;</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                       <span class="n">localization</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">montage</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">rootdir</span><span class="o">=</span><span class="n">rhino_root</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="Using-the-Default-Representation">
<h3>Using the Default Representation<a class="headerlink" href="#Using-the-Default-Representation" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Pandas dataframe</span>
<span class="n">events_df</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;task_events&#39;</span><span class="p">)</span>
<span class="n">events_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[14]:
</pre></div>
</div>
<div class="output_area docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>eegoffset</th>
      <th>category</th>
      <th>category_num</th>
      <th>eegfile</th>
      <th>exp_version</th>
      <th>experiment</th>
      <th>intrusion</th>
      <th>is_stim</th>
      <th>item_name</th>
      <th>item_num</th>
      <th>...</th>
      <th>recog_rt</th>
      <th>recognized</th>
      <th>rectime</th>
      <th>rejected</th>
      <th>serialpos</th>
      <th>session</th>
      <th>stim_list</th>
      <th>stim_params</th>
      <th>subject</th>
      <th>type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-1</td>
      <td>X</td>
      <td>-999</td>
      <td></td>
      <td></td>
      <td>catFR5</td>
      <td>-999</td>
      <td>False</td>
      <td>X</td>
      <td>-999</td>
      <td>...</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>1</td>
      <td>False</td>
      <td>[]</td>
      <td>R1389J</td>
      <td>STIM_ARTIFACT_DETECTION_START</td>
    </tr>
    <tr>
      <th>1</th>
      <td>5831</td>
      <td>X</td>
      <td>-999</td>
      <td>R1389J_catFR5_1_28Feb18_1552.h5</td>
      <td></td>
      <td>catFR5</td>
      <td>-999</td>
      <td>False</td>
      <td></td>
      <td>-1</td>
      <td>...</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>1</td>
      <td>False</td>
      <td>[{'amplitude': 500.0, 'anode_label': 'STG6', '...</td>
      <td>R1389J</td>
      <td>STIM_ON</td>
    </tr>
    <tr>
      <th>2</th>
      <td>7790</td>
      <td>X</td>
      <td>-999</td>
      <td>R1389J_catFR5_1_28Feb18_1552.h5</td>
      <td></td>
      <td>catFR5</td>
      <td>-999</td>
      <td>False</td>
      <td></td>
      <td>-1</td>
      <td>...</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>1</td>
      <td>False</td>
      <td>[{'amplitude': 500.0, 'anode_label': 'STG6', '...</td>
      <td>R1389J</td>
      <td>STIM_ON</td>
    </tr>
    <tr>
      <th>3</th>
      <td>9786</td>
      <td>X</td>
      <td>-999</td>
      <td>R1389J_catFR5_1_28Feb18_1552.h5</td>
      <td></td>
      <td>catFR5</td>
      <td>-999</td>
      <td>False</td>
      <td></td>
      <td>-1</td>
      <td>...</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>1</td>
      <td>False</td>
      <td>[{'amplitude': 500.0, 'anode_label': 'STG6', '...</td>
      <td>R1389J</td>
      <td>STIM_ON</td>
    </tr>
    <tr>
      <th>4</th>
      <td>11782</td>
      <td>X</td>
      <td>-999</td>
      <td>R1389J_catFR5_1_28Feb18_1552.h5</td>
      <td></td>
      <td>catFR5</td>
      <td>-999</td>
      <td>False</td>
      <td></td>
      <td>-1</td>
      <td>...</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>1</td>
      <td>False</td>
      <td>[{'amplitude': 500.0, 'anode_label': 'STG6', '...</td>
      <td>R1389J</td>
      <td>STIM_ON</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 28 columns</p>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Python dictionary</span>
<span class="n">electrode_categories_dict</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;electrode_categories&#39;</span><span class="p">)</span>
<span class="n">electrode_categories_dict</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[15]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>{&#39;interictal&#39;: [&#39;ONEMC 9&#39;,
  &#39;ONEMC10&#39;,
  &#39;ONEMC8&#39;,
  &#39;SMC3&#39;,
  &#39;SMC4&#39;,
  &#39;STG 7 &#39;,
  &#39;STG8&#39;,
  &#39;TWOSTG 4&#39;],
 &#39;brain_lesion&#39;: [&#39;FOURSC&#39;, &#39;ONESC&#39;, &#39;ONNEMC&#39;, &#39;THREESC&#39;, &#39;TWOMC&#39;, &#39;TWOSC&#39;],
 &#39;bad_channel&#39;: [&#39;NONE&#39;],
 &#39;soz&#39;: []}
</pre></div>
</div>
</div>
</div>
<div class="section" id="Using-the-Underlying-Reader">
<h3>Using the Underlying Reader<a class="headerlink" href="#Using-the-Underlying-Reader" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Ask CMLReader to give back the reader instead of the data</span>
<span class="n">event_reader</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">get_reader</span><span class="p">(</span><span class="s1">&#39;task_events&#39;</span><span class="p">)</span>
<span class="nb">type</span><span class="p">(</span><span class="n">event_reader</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[16]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>cmlreaders.readers.readers.EventReader
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Load the task events as a dictionary instead of the default representation</span>
<span class="n">event_dict</span> <span class="o">=</span> <span class="n">event_reader</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()</span>
<span class="n">event_dict</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[17]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>[{&#39;eegoffset&#39;: -1,
  &#39;category&#39;: &#39;X&#39;,
  &#39;category_num&#39;: -999,
  &#39;eegfile&#39;: &#39;&#39;,
  &#39;exp_version&#39;: &#39;&#39;,
  &#39;experiment&#39;: &#39;catFR5&#39;,
  &#39;intrusion&#39;: -999,
  &#39;is_stim&#39;: False,
  &#39;item_name&#39;: &#39;X&#39;,
  &#39;item_num&#39;: -999,
  &#39;list&#39;: -999,
  &#39;montage&#39;: 0,
  &#39;msoffset&#39;: -1,
  &#39;mstime&#39;: -1,
  &#39;phase&#39;: &#39;&#39;,
  &#39;protocol&#39;: &#39;r1&#39;,
  &#39;recalled&#39;: False,
  &#39;recog_resp&#39;: -999,
  &#39;recog_rt&#39;: -999,
  &#39;recognized&#39;: -999,
  &#39;rectime&#39;: -999,
  &#39;rejected&#39;: -999,
  &#39;serialpos&#39;: -999,
  &#39;session&#39;: 1,
  &#39;stim_list&#39;: False,
  &#39;stim_params&#39;: [],
  &#39;subject&#39;: &#39;R1389J&#39;,
  &#39;type&#39;: &#39;STIM_ARTIFACT_DETECTION_START&#39;}]
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Load the task event as a recarray (not recommended)</span>
<span class="n">event_recarray</span> <span class="o">=</span> <span class="n">event_reader</span><span class="o">.</span><span class="n">as_recarray</span><span class="p">()</span>
<span class="n">event_recarray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[18]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>(0, -1, &#39;X&#39;, -999, &#39;&#39;, &#39;&#39;, &#39;catFR5&#39;, -999, False, &#39;X&#39;, -999, -999, 0, -1, -1, &#39;&#39;, &#39;r1&#39;, False, -999, -999, -999, -999, -999, -999, 1, False, [], &#39;R1389J&#39;, &#39;STIM_ARTIFACT_DETECTION_START&#39;)
</pre></div>
</div>
</div>
</div>
<div class="section" id="Loading-from-a-Custom-Location">
<h3>Loading from a Custom Location<a class="headerlink" href="#Loading-from-a-Custom-Location" title="Permalink to this headline">¶</a></h3>
<p>Since locations are automatically determined based on the data type, if
loading from a custom location, be sure to specify the file_type
parameter when loading the data. One common use case for this
functionality is that you need to load some data from your scratch or
home directory that is in a format supported by CMLReaders. Another use
case is that you may discover that data is residing in a location that
is not known by CMLReaders. Instead of waiting until the next release of
the package, you can use a custom file path to load the data, submit an
issue on Github, and continue with you analysis.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Loading from a custom location</span>
<span class="n">event_reader</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s2">&quot;task_events.json&quot;</span><span class="p">)</span>
<span class="n">event_df</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;task_events&#39;</span><span class="p">,</span> <span class="n">file_path</span><span class="o">=</span><span class="s1">&#39;task_events.json&#39;</span><span class="p">)</span>
<span class="n">event_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[19]:
</pre></div>
</div>
<div class="output_area docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>eegoffset</th>
      <th>category</th>
      <th>category_num</th>
      <th>eegfile</th>
      <th>exp_version</th>
      <th>experiment</th>
      <th>intrusion</th>
      <th>is_stim</th>
      <th>item_name</th>
      <th>item_num</th>
      <th>...</th>
      <th>recog_rt</th>
      <th>recognized</th>
      <th>rectime</th>
      <th>rejected</th>
      <th>serialpos</th>
      <th>session</th>
      <th>stim_list</th>
      <th>stim_params</th>
      <th>subject</th>
      <th>type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-1</td>
      <td>X</td>
      <td>-999</td>
      <td></td>
      <td></td>
      <td>catFR5</td>
      <td>-999</td>
      <td>False</td>
      <td>X</td>
      <td>-999</td>
      <td>...</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>1</td>
      <td>False</td>
      <td>[]</td>
      <td>R1389J</td>
      <td>STIM_ARTIFACT_DETECTION_START</td>
    </tr>
    <tr>
      <th>1</th>
      <td>5831</td>
      <td>X</td>
      <td>-999</td>
      <td>R1389J_catFR5_1_28Feb18_1552.h5</td>
      <td></td>
      <td>catFR5</td>
      <td>-999</td>
      <td>False</td>
      <td></td>
      <td>-1</td>
      <td>...</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>1</td>
      <td>False</td>
      <td>[{'amplitude': 500.0, 'anode_label': 'STG6', '...</td>
      <td>R1389J</td>
      <td>STIM_ON</td>
    </tr>
    <tr>
      <th>10</th>
      <td>23781</td>
      <td>X</td>
      <td>-999</td>
      <td>R1389J_catFR5_1_28Feb18_1552.h5</td>
      <td></td>
      <td>catFR5</td>
      <td>-999</td>
      <td>False</td>
      <td></td>
      <td>-1</td>
      <td>...</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>1</td>
      <td>False</td>
      <td>[{'amplitude': 500.0, 'anode_label': 'STG6', '...</td>
      <td>R1389J</td>
      <td>STIM_ON</td>
    </tr>
    <tr>
      <th>100</th>
      <td>315125</td>
      <td>X</td>
      <td>-999</td>
      <td>R1389J_catFR5_1_28Feb18_1552.h5</td>
      <td></td>
      <td>catFR5</td>
      <td>-999</td>
      <td>False</td>
      <td>X</td>
      <td>-999</td>
      <td>...</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>1</td>
      <td>False</td>
      <td>[]</td>
      <td>R1389J</td>
      <td>REC_END</td>
    </tr>
    <tr>
      <th>1000</th>
      <td>2515863</td>
      <td>Flowers</td>
      <td>9</td>
      <td>R1389J_catFR5_1_28Feb18_1552.h5</td>
      <td></td>
      <td>catFR5</td>
      <td>-999</td>
      <td>False</td>
      <td>LILY</td>
      <td>112</td>
      <td>...</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>4</td>
      <td>1</td>
      <td>True</td>
      <td>[]</td>
      <td>R1389J</td>
      <td>WORD</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 28 columns</p>
</div></div>
</div>
</div>
</div>
<div class="section" id="Saving-Data">
<h2>Saving Data<a class="headerlink" href="#Saving-Data" title="Permalink to this headline">¶</a></h2>
<p>CMLReaders can also be used to save data in a different format from the
original files. The three supported output formats are: CSV, JSON, and
HDF5. However, not all file formats are supported by all of the readers.
In particular, HDF5 output is only supported for a minimal number of
data types.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># JSON to CSV</span>
<span class="n">event_reader</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;task_events.csv&quot;</span><span class="p">)</span>
<span class="n">event_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;task_events.csv&quot;</span><span class="p">)</span>
<span class="n">event_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[20]:
</pre></div>
</div>
<div class="output_area docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>eegoffset</th>
      <th>category</th>
      <th>category_num</th>
      <th>eegfile</th>
      <th>exp_version</th>
      <th>experiment</th>
      <th>intrusion</th>
      <th>is_stim</th>
      <th>item_name</th>
      <th>item_num</th>
      <th>...</th>
      <th>recog_rt</th>
      <th>recognized</th>
      <th>rectime</th>
      <th>rejected</th>
      <th>serialpos</th>
      <th>session</th>
      <th>stim_list</th>
      <th>stim_params</th>
      <th>subject</th>
      <th>type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-1</td>
      <td>X</td>
      <td>-999</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>catFR5</td>
      <td>-999</td>
      <td>False</td>
      <td>X</td>
      <td>-999</td>
      <td>...</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>1</td>
      <td>False</td>
      <td>[]</td>
      <td>R1389J</td>
      <td>STIM_ARTIFACT_DETECTION_START</td>
    </tr>
    <tr>
      <th>1</th>
      <td>5831</td>
      <td>X</td>
      <td>-999</td>
      <td>R1389J_catFR5_1_28Feb18_1552.h5</td>
      <td>NaN</td>
      <td>catFR5</td>
      <td>-999</td>
      <td>False</td>
      <td>NaN</td>
      <td>-1</td>
      <td>...</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>1</td>
      <td>False</td>
      <td>[{'amplitude': 500.0, 'anode_label': 'STG6', '...</td>
      <td>R1389J</td>
      <td>STIM_ON</td>
    </tr>
    <tr>
      <th>2</th>
      <td>7790</td>
      <td>X</td>
      <td>-999</td>
      <td>R1389J_catFR5_1_28Feb18_1552.h5</td>
      <td>NaN</td>
      <td>catFR5</td>
      <td>-999</td>
      <td>False</td>
      <td>NaN</td>
      <td>-1</td>
      <td>...</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>1</td>
      <td>False</td>
      <td>[{'amplitude': 500.0, 'anode_label': 'STG6', '...</td>
      <td>R1389J</td>
      <td>STIM_ON</td>
    </tr>
    <tr>
      <th>3</th>
      <td>9786</td>
      <td>X</td>
      <td>-999</td>
      <td>R1389J_catFR5_1_28Feb18_1552.h5</td>
      <td>NaN</td>
      <td>catFR5</td>
      <td>-999</td>
      <td>False</td>
      <td>NaN</td>
      <td>-1</td>
      <td>...</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>1</td>
      <td>False</td>
      <td>[{'amplitude': 500.0, 'anode_label': 'STG6', '...</td>
      <td>R1389J</td>
      <td>STIM_ON</td>
    </tr>
    <tr>
      <th>4</th>
      <td>11782</td>
      <td>X</td>
      <td>-999</td>
      <td>R1389J_catFR5_1_28Feb18_1552.h5</td>
      <td>NaN</td>
      <td>catFR5</td>
      <td>-999</td>
      <td>False</td>
      <td>NaN</td>
      <td>-1</td>
      <td>...</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>-999</td>
      <td>1</td>
      <td>False</td>
      <td>[{'amplitude': 500.0, 'anode_label': 'STG6', '...</td>
      <td>R1389J</td>
      <td>STIM_ON</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 28 columns</p>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># CSV to JSON</span>
<span class="n">electrode_coord_reader</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">get_reader</span><span class="p">(</span><span class="s1">&#39;electrode_coordinates&#39;</span><span class="p">)</span>
<span class="n">electrode_coord_reader</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s1">&#39;electrode_coordinates.json&#39;</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;electrode_coordinates.json&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">electrode_coord_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="n">electrode_coord_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[21]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>dict_keys([&#39;contact_name&#39;, &#39;contact_type&#39;, &#39;x&#39;, &#39;y&#39;, &#39;z&#39;, &#39;atlas&#39;, &#39;orient_to&#39;])
</pre></div>
</div>
</div>
</div>
<div class="section" id="Examples">
<h2>Examples<a class="headerlink" href="#Examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="Loading-Multiple-Sessions">
<h3>Loading Multiple Sessions<a class="headerlink" href="#Loading-Multiple-Sessions" title="Permalink to this headline">¶</a></h3>
<p>CMLReaders is currently designed for loading events one session at a
time. This may change in the future, but in the interim, it is
straightforward to load multiple sessions-worth of events.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Find all sessions of FR6 that subject R1409D completed</span>
<span class="n">sessions_completed</span> <span class="o">=</span> <span class="n">r1_data</span><span class="p">[(</span><span class="n">r1_data</span><span class="p">[</span><span class="s1">&#39;subject&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;R1409D&#39;</span><span class="p">)</span> <span class="o">&amp;</span>
                             <span class="p">(</span><span class="n">r1_data</span><span class="p">[</span><span class="s1">&#39;experiment&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;FR6&#39;</span><span class="p">)][</span><span class="s1">&#39;session&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="n">sessions_completed</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[22]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>array([0, 2, 3, 9])
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Verbose method</span>
<span class="n">all_events</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">session</span> <span class="ow">in</span> <span class="n">sessions_completed</span><span class="p">:</span>
    <span class="n">sess_events</span> <span class="o">=</span> <span class="n">cml</span><span class="o">.</span><span class="n">CMLReader</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="s2">&quot;R1409D&quot;</span><span class="p">,</span> <span class="n">experiment</span><span class="o">=</span><span class="s2">&quot;FR6&quot;</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">,</span>
                                <span class="n">localization</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">montage</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">rootdir</span><span class="o">=</span><span class="n">rhino_root</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;task_events&#39;</span><span class="p">)</span>
    <span class="n">all_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sess_events</span><span class="p">)</span>

<span class="n">all_sessions_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">all_events</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">all_sessions_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[23]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>4527
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Same operation, but with list comprehension</span>
<span class="n">all_session_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">cml</span><span class="o">.</span><span class="n">CMLReader</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="s1">&#39;R1409D&#39;</span><span class="p">,</span> <span class="n">experiment</span><span class="o">=</span><span class="s1">&#39;FR6&#39;</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">,</span> <span class="n">rootdir</span><span class="o">=</span><span class="n">rhino_root</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;events&#39;</span><span class="p">)</span>
                            <span class="k">for</span> <span class="n">session</span> <span class="ow">in</span> <span class="n">sessions_completed</span><span class="p">])</span>
<span class="nb">len</span><span class="p">(</span><span class="n">all_sessions_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[24]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>4527
</pre></div>
</div>
</div>
<p>We can also use the special <code class="docutils literal notranslate"><span class="pre">load_events</span></code> classmethod to load events
from multiple subjects and/or experiments.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">aggregate_events</span> <span class="o">=</span> <span class="n">cml</span><span class="o">.</span><span class="n">CMLReader</span><span class="o">.</span><span class="n">load_events</span><span class="p">(</span><span class="n">subjects</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;R1111M&quot;</span><span class="p">,</span> <span class="s2">&quot;R1409D&quot;</span><span class="p">],</span>
                                             <span class="n">experiments</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;FR1&quot;</span><span class="p">],</span>
                                             <span class="n">rootdir</span><span class="o">=</span><span class="n">rhino_root</span><span class="p">)</span>
<span class="n">aggregate_events</span><span class="o">.</span><span class="n">subject</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[25]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>array([&#39;R1111M&#39;, &#39;R1409D&#39;], dtype=object)
</pre></div>
</div>
</div>
</div>
<div class="section" id="Loading-EEG">
<h3>Loading EEG<a class="headerlink" href="#Loading-EEG" title="Permalink to this headline">¶</a></h3>
<p>Loading EEG data is a bit more complicated than loading other data
types. For this reason, rather than using the general <code class="docutils literal notranslate"><span class="pre">load</span></code> method,
we instead use <code class="docutils literal notranslate"><span class="pre">load_eeg</span></code> which takes special keyword arguments. As
always, start by instantiating a <code class="docutils literal notranslate"><span class="pre">CMLReader</span></code>:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">reader</span> <span class="o">=</span> <span class="n">cml</span><span class="o">.</span><span class="n">CMLReader</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="s1">&#39;R1111M&#39;</span><span class="p">,</span> <span class="n">experiment</span><span class="o">=</span><span class="s1">&#39;FR1&#39;</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">rootdir</span><span class="o">=</span><span class="n">rhino_root</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="Reading-a-full-session">
<h4>Reading a full session<a class="headerlink" href="#Reading-a-full-session" title="Permalink to this headline">¶</a></h4>
<p>If we give no parameters to <code class="docutils literal notranslate"><span class="pre">reader.load_eeg</span></code>, then by default all
data for an entire session will be loaded as the data were recorded:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">full_session_eeg</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">load_eeg</span><span class="p">()</span>
<span class="n">full_session_eeg</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[27]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>(1, 100, 1623160)
</pre></div>
</div>
</div>
</div>
<div class="section" id="Reading-from-events">
<h4>Reading from events<a class="headerlink" href="#Reading-from-events" title="Permalink to this headline">¶</a></h4>
<p>To select EEG epochs based on events, first load the events and use
standard pandas idioms to select events of interest:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">events</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;events&#39;</span><span class="p">)</span>
<span class="n">word_events</span> <span class="o">=</span> <span class="n">events</span><span class="p">[</span><span class="n">events</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;WORD&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>In addition to passing the events, we also need to specify relative
start and stop times in milliseconds. Below, we will load data for each
word onset starting at the time the word appeared and ending 100 ms
later:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">word_event_eeg</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">load_eeg</span><span class="p">(</span><span class="n">events</span><span class="o">=</span><span class="n">word_events</span><span class="p">,</span> <span class="n">rel_start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">rel_stop</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">word_event_eeg</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[29]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>(288, 100, 50)
</pre></div>
</div>
</div>
</div>
<div class="section" id="Reading-from-multiple-sessions">
<h4>Reading from multiple sessions<a class="headerlink" href="#Reading-from-multiple-sessions" title="Permalink to this headline">¶</a></h4>
<p>Building upon aggregate event loading, we can also load EEG data from
multiple sessions. The caveat here is that we are restricted to a single
subject:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">all_fr1_events</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">load_events</span><span class="p">(</span><span class="n">subjects</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;R1111M&quot;</span><span class="p">],</span> <span class="n">experiments</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;FR1&quot;</span><span class="p">],</span> <span class="n">rootdir</span><span class="o">=</span><span class="n">rhino_root</span><span class="p">)</span>
<span class="n">fr1_words</span> <span class="o">=</span> <span class="n">all_fr1_events</span><span class="p">[</span><span class="n">all_fr1_events</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;WORD&quot;</span><span class="p">]</span>
<span class="n">fr1_eeg</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">load_eeg</span><span class="p">(</span><span class="n">events</span><span class="o">=</span><span class="n">fr1_words</span><span class="p">,</span> <span class="n">rel_start</span><span class="o">=-</span><span class="mi">100</span><span class="p">,</span> <span class="n">rel_stop</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">fr1_eeg</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[30]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>(1020, 100, 100)
</pre></div>
</div>
</div>
</div>
<div class="section" id="Converting-EEG-Representation">
<h4>Converting EEG Representation<a class="headerlink" href="#Converting-EEG-Representation" title="Permalink to this headline">¶</a></h4>
<p>By default, CMLReaders uses a simple container for time series data.
However, we provide two utility methods for converting this
representation to a format that is understood by PTSA and MNE, since
these are common libraries for interacting with EEG data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ptsa_eeg</span> <span class="o">=</span> <span class="n">word_event_eeg</span><span class="o">.</span><span class="n">to_ptsa</span><span class="p">()</span>
<span class="nb">type</span><span class="p">(</span><span class="n">ptsa_eeg</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[31]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>ptsa.data.timeseries.TimeSeries
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">mne_eeg</span> <span class="o">=</span> <span class="n">word_event_eeg</span><span class="o">.</span><span class="n">to_mne</span><span class="p">()</span>
<span class="nb">type</span><span class="p">(</span><span class="n">mne_eeg</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[32]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>mne.epochs.EpochsArray
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="shortcuts.html" class="btn btn-neutral float-right" title="Shortcuts for common queries" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="data_guide.html" class="btn btn-neutral" title="Data Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.8.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>